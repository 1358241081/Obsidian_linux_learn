## 磁盘物理结构
![[《鸟哥的Linux私房菜-基础篇》第四版.pdf#page=19]]

上图显示的是机械硬盘的物理结构，可以看到磁盘　马达等
至于固态硬盘　则没有磁盘和马达这些东西
![[《鸟哥的Linux私房菜-基础篇》第四版.pdf#page=22]]

各种硬盘与主机的传输接口影响着传输速度，硬盘接口分为[IDE](https://baike.baidu.com/item/IDE)、[SATA](https://baike.baidu.com/item/SATA)、[SCSI](https://baike.baidu.com/item/SCSI)和[光纤](https://baike.baidu.com/item/%E5%85%89%E7%BA%A4)通道四种，可通过链接跳转自行查阅



### 盘片 片面 和 磁头

硬盘中一般会有多个盘片组成，每个盘片包含两个面，每个盘面都对应地有一个读/写磁头。受到硬盘整体体积和生产成本的限制，盘片数量都受到限制，一般都在5片以内。盘片的编号自下向上从0开始，如最下边的盘片有0面和1面，再上一个盘片就编号为2面和3面。  
如下图：

![[Pasted image 20211010170300.png]]

### 扇区和磁道
![[Pasted image 20211010170041.png]]

### 柱面
![[Pasted image 20211010165946.png]]


### 磁盘容量计算

存储容量 ＝ 磁头数 × 磁道(柱面)数 × 每道扇区数 × 每扇区字节数

图3中磁盘是一个 3个圆盘6个磁头，7个柱面（每个盘片7个磁道） 的磁盘，图3中每条磁道有12个扇区，所以此磁盘的容量为：

存储容量 6 * 7 * 12 * 512 = 258048

> 每个磁道的扇区数一样是说的老的硬盘，外圈的密度小，内圈的密度大，每圈可存储的数据量是一样的。新的硬盘数据的密度都一致，这样磁道的周长越长，扇区就越多，存储的数据量就越大。

### 磁盘读取响应时间

1.  寻道时间：磁头从开始移动到数据所在磁道所需要的时间，寻道时间越短，I/O操作越快，目前磁盘的平均寻道时间一般在3－15ms，一般都在10ms左右。
2.  旋转延迟：盘片旋转将请求数据所在扇区移至读写磁头下方所需要的时间，旋转延迟取决于磁盘转速。普通硬盘一般都是7200rpm，慢的5400rpm。
3.  数据传输时间：完成传输所请求的数据所需要的时间。  
    小结一下：从上面的指标来看、其实最重要的、或者说、我们最关心的应该只有两个：寻道时间；旋转延迟。

> 读写一次磁盘信息所需的时间可分解为：寻道时间、延迟时间、传输时间。为提高磁盘传输效率，软件应着重考虑减少寻道时间和延迟时间。

### 块/簇

#### 概述

磁盘块/簇（虚拟出来的）。 块是操作系统中最小的逻辑存储单位。操作系统与磁盘打交道的最小单位是磁盘块。  
通俗的来讲，在Windows下如NTFS等文件系统中叫做簇；在Linux下如Ext4等文件系统中叫做块（block）。每个簇或者块可以包括2、4、8、16、32、64…2的n次方个扇区。

#### 为什么存在磁盘块？

读取方便：由于扇区的数量比较小，数目众多在寻址时比较困难，所以操作系统就将相邻的扇区组合在一起，形成一个块，再对块进行整体的操作。

分离对底层的依赖：操作系统忽略对底层物理存储结构的设计。通过虚拟出来磁盘块的概念，在系统中认为块是最小的单位。

### page

操作系统经常与内存和硬盘这两种存储设备进行通信，类似于“块”的概念，都需要一种虚拟的基本单位。所以，与内存操作，是虚拟一个页的概念来作为最小单位。与硬盘打交道，就是以块为最小单位。

## 扇区、块/簇、page的关系

1.  扇区： 硬盘的最小读写单元
2.  块/簇： 是操作系统针对硬盘读写的最小单元
3.  page： 是内存与操作系统之间操作的最小单元。

扇区 <= 块/簇 <= page

