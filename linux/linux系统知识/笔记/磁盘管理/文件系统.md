## 文件系统

为什么需要文件系统呢？
![[Pasted image 20220303225138.png]]

### 虚拟文件系统(VFS)
![[Pasted image 20211213155406.png]]

- vfs针对文件系统定义了一套通用接口，所有与文件交互的程序都按照这一接口操作
- 每种文件系统都会实现vfs接口
- 非unxi的文件系统　不支持所有vfs操作(例如：微软的vfat不支持symlink 符号链接)，遇到这种情况，底层文件系统会将错误代码传入vfs层，表明不支持该操作。vfs层将错误传递给应用程序。
- vfs接口的操作与涉及文件系统和目录的所有常规系统调用相对应，这些系统调用有open(),read(),write(),lseek(),close(),truncate(),stat(),mount(),umount(),mmap(),mkdir(),link(),unlimk(),symlink(),rename()。
- 在这里补充一句 c或者c++语言的io操作如fopen等 内部其实是调用操作系统的系统调用函数。


### 日志文件系统(ext3/ext4/xfs)
优点：
缺点：

日志文件系统的几种策略：
- 日志只写动作
- 日志同时写入动作和数据

#### xfs

查看前可能需要先卸载挂载点

![[Pasted image 20211012193753.png]]


<iframe 
 height=500
 width=800  
src="https://blog.csdn.net/weixin_31869917/article/details/116732619"　
>
</iframe>



### 非日志文件系统



#### ext2文件系统

